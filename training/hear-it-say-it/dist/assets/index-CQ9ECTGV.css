:root{--bg-primary: #0a0a0f;--bg-secondary: #12121a;--text-primary: #f0f0f0;--text-muted: #888;--glass-bg: rgba(255, 255, 255, .05);--glass-border: rgba(255, 255, 255, .1);--glass-blur: 20px;--accent-green: #00d26a;--accent-yellow: #ffc107;--accent-red: #ff4757;--accent-blue: #3b82f6;--spacing-xs: 4px;--spacing-sm: 8px;--spacing-md: 16px;--spacing-lg: 24px;--spacing-xl: 32px;--touch-min: 44px;--font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;--font-mono: "SF Mono", "Consolas", "Monaco", monospace;--transition-fast: .15s ease;--transition-normal: .25s ease}.vail-nav{display:flex;align-items:center;gap:var(--spacing-md);padding:var(--spacing-sm) var(--spacing-lg);background:#1a1a1a;border-bottom:1px solid #2a2a2a}.vail-nav .back-link{color:#00d1b2;text-decoration:none;font-size:.9rem;transition:color var(--transition-fast)}.vail-nav .back-link:hover{color:#00f0cc}.vail-nav .nav-title{flex:1;text-align:center;font-weight:600;font-size:1rem;color:var(--text-primary)}.vail-nav .beta-badge{background:#03dac6;color:#121212;padding:.15rem .4rem;border-radius:4px;font-size:.65rem;font-weight:700;text-transform:uppercase;letter-spacing:.05em}*,*:before,*:after{box-sizing:border-box;margin:0;padding:0}html{font-size:16px;-webkit-tap-highlight-color:transparent}body{font-family:var(--font-family);background:var(--bg-primary);color:var(--text-primary);min-height:100vh;line-height:1.5;overflow-x:hidden}.glass-card{background:var(--glass-bg);backdrop-filter:blur(var(--glass-blur));-webkit-backdrop-filter:blur(var(--glass-blur));border:1px solid var(--glass-border);border-radius:16px;padding:var(--spacing-lg);box-shadow:0 4px 30px #0000004d,inset 0 1px #ffffff0d}#app{min-height:100vh;display:flex;flex-direction:column}.app-header{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-md) var(--spacing-lg);background:var(--glass-bg);backdrop-filter:blur(var(--glass-blur));-webkit-backdrop-filter:blur(var(--glass-blur));border-bottom:1px solid var(--glass-border);position:sticky;top:0;z-index:100}.app-header h1{font-size:1.25rem;font-weight:600;background:linear-gradient(135deg,var(--accent-blue),var(--accent-green));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.main-content{flex:1;display:flex;flex-direction:column;gap:var(--spacing-lg);padding:var(--spacing-lg);max-width:800px;margin:0 auto;width:100%}.icon-btn{width:var(--touch-min);height:var(--touch-min);display:flex;align-items:center;justify-content:center;background:transparent;border:none;color:var(--text-primary);cursor:pointer;border-radius:8px;transition:background var(--transition-fast);font-size:1.5rem}.icon-btn:hover{background:var(--glass-bg)}.primary-btn{min-height:var(--touch-min);padding:var(--spacing-sm) var(--spacing-xl);background:linear-gradient(135deg,var(--accent-blue),#2563eb);color:#fff;border:none;border-radius:12px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:transform var(--transition-fast),box-shadow var(--transition-fast);box-shadow:0 4px 15px #3b82f64d}.primary-btn:hover{transform:translateY(-2px);box-shadow:0 6px 20px #3b82f666}.primary-btn:active{transform:translateY(0)}.primary-btn.running{background:linear-gradient(135deg,var(--accent-red),#dc2626);box-shadow:0 4px 15px #ff47574d}.secondary-btn{min-height:var(--touch-min);padding:var(--spacing-sm) var(--spacing-md);background:var(--glass-bg);color:var(--text-primary);border:1px solid var(--glass-border);border-radius:8px;font-size:.9rem;cursor:pointer;transition:background var(--transition-fast)}.secondary-btn:hover{background:#ffffff1a}.danger-btn{min-height:var(--touch-min);padding:var(--spacing-sm) var(--spacing-md);background:transparent;color:var(--accent-red);border:1px solid var(--accent-red);border-radius:8px;font-size:.9rem;cursor:pointer;transition:background var(--transition-fast)}.danger-btn:hover{background:#ff47571a}#mic-test-area{text-align:center}#mic-test-area h2{font-size:1.1rem;margin-bottom:var(--spacing-sm)}.mic-instructions{color:var(--text-muted);font-size:.85rem;margin-bottom:var(--spacing-md)}.mic-controls{display:flex;align-items:center;justify-content:center;gap:var(--spacing-md);flex-wrap:wrap}.mic-level-container{width:150px;height:8px;background:var(--glass-border);border-radius:4px;overflow:hidden}.mic-level{height:100%;width:0%;background:linear-gradient(90deg,var(--accent-green),var(--accent-yellow));transition:width 50ms ease;border-radius:4px}.mic-result{margin-top:var(--spacing-md);min-height:2rem;font-size:.9rem}.mic-result.success{color:var(--accent-green)}.mic-result.error{color:var(--accent-red)}.mic-result.listening{color:var(--accent-blue)}#mic-test-btn.testing{background:var(--accent-blue);border-color:var(--accent-blue);color:#fff}#practice-area{text-align:center;display:flex;flex-direction:column;align-items:center;gap:var(--spacing-lg)}.feedback-display{display:flex;flex-direction:column;align-items:center;gap:var(--spacing-sm)}.current-char{font-size:4rem;font-weight:700;font-family:var(--font-mono);min-height:5rem;display:flex;align-items:center;justify-content:center;transition:color var(--transition-normal)}.current-char.correct{color:var(--accent-green);text-shadow:0 0 20px rgba(0,210,106,.5)}.current-char.incorrect{color:var(--accent-red);text-shadow:0 0 20px rgba(255,71,87,.5)}.feedback-text{color:var(--text-muted);font-size:.9rem}.listening-indicator{display:flex;align-items:center;gap:var(--spacing-sm);color:var(--accent-blue)}.pulse-ring{width:12px;height:12px;border-radius:50%;background:var(--accent-blue);animation:pulse 1.5s ease-in-out infinite}@keyframes pulse{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.5);opacity:.5}}.debug-heard{margin-top:var(--spacing-sm);padding:var(--spacing-sm);font-family:monospace;font-size:.75rem;color:var(--text-muted);background:#0000004d;border-radius:4px;min-height:1.5em}.debug-heard:empty{display:none}#chart-section{display:flex;flex-direction:column;gap:var(--spacing-md)}#chart-section h2{font-size:1rem;font-weight:500;color:var(--text-muted)}.chart-legend{display:flex;flex-wrap:wrap;gap:var(--spacing-md);font-size:.8rem;color:var(--text-muted)}.legend-item{display:flex;align-items:center;gap:var(--spacing-xs)}.dot{width:10px;height:10px;border-radius:50%}.dot.green{background:var(--accent-green)}.dot.yellow{background:var(--accent-yellow)}.dot.red{background:var(--accent-red)}.chart-container{width:100%;overflow-x:auto;overflow-y:hidden;border-radius:8px;-webkit-overflow-scrolling:touch}#progress-chart{min-width:100%;height:200px;display:block}.settings-panel{position:fixed;top:0;right:0;width:100%;max-width:400px;height:100vh;background:var(--bg-secondary);backdrop-filter:blur(var(--glass-blur));-webkit-backdrop-filter:blur(var(--glass-blur));border-left:1px solid var(--glass-border);padding:var(--spacing-lg);overflow-y:auto;z-index:200;transform:translate(100%);transition:transform var(--transition-normal)}.settings-panel.visible{transform:translate(0)}.settings-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-lg)}.settings-header h2{font-size:1.25rem;font-weight:600}.setting-group{margin-bottom:var(--spacing-lg)}.setting-group label,.setting-group h3{display:block;margin-bottom:var(--spacing-sm);font-size:.9rem;color:var(--text-muted)}.setting-group h3{font-weight:500;color:var(--text-primary)}.setting-value{display:inline-block;min-width:3ch;text-align:right;font-family:var(--font-mono);color:var(--accent-blue)}.setting-description{font-size:.75rem;color:var(--text-muted);opacity:.7;margin:var(--spacing-xs) 0 0 0;line-height:1.3}.toggle-switch{position:relative;display:inline-block;width:50px;height:28px;flex-shrink:0}.toggle-switch input{opacity:0;width:0;height:0}.toggle-slider{position:absolute;cursor:pointer;inset:0;background-color:var(--glass-border);transition:var(--transition-normal);border-radius:28px}.toggle-slider:before{position:absolute;content:"";height:22px;width:22px;left:3px;bottom:3px;background-color:var(--text-primary);transition:var(--transition-normal);border-radius:50%;box-shadow:0 2px 4px #0000004d}.toggle-switch input:checked+.toggle-slider{background-color:var(--accent-blue)}.toggle-switch input:checked+.toggle-slider:before{transform:translate(22px)}.toggle-switch input:focus+.toggle-slider{box-shadow:0 0 0 2px #3b82f64d}.toggle-label{display:flex;align-items:center;gap:var(--spacing-md);cursor:pointer;color:var(--text-primary);font-size:.95rem}.toggle-label>span:last-child{flex:1}input[type=range]{width:100%;height:6px;background:var(--glass-border);border-radius:3px;appearance:none;-webkit-appearance:none;cursor:pointer}input[type=range]::-webkit-slider-thumb{appearance:none;-webkit-appearance:none;width:20px;height:20px;background:var(--accent-blue);border-radius:50%;cursor:pointer;box-shadow:0 2px 6px #0000004d}input[type=range]::-moz-range-thumb{width:20px;height:20px;background:var(--accent-blue);border-radius:50%;cursor:pointer;border:none}.character-sets{display:flex;flex-wrap:wrap;gap:var(--spacing-xs)}.character-sets button{padding:var(--spacing-xs) var(--spacing-sm);background:var(--glass-bg);border:1px solid var(--glass-border);border-radius:6px;color:var(--text-muted);font-size:.8rem;cursor:pointer;transition:all var(--transition-fast)}.character-sets button.active{background:var(--accent-blue);border-color:var(--accent-blue);color:#fff}.character-sets button:hover:not(.active){border-color:var(--accent-blue);color:var(--text-primary)}.custom-chars{display:grid;grid-template-columns:repeat(auto-fill,minmax(36px,1fr));gap:var(--spacing-xs)}.custom-chars button{width:36px;height:36px;display:flex;align-items:center;justify-content:center;background:var(--glass-bg);border:1px solid var(--glass-border);border-radius:6px;color:var(--text-muted);font-family:var(--font-mono);font-size:.9rem;cursor:pointer;transition:all var(--transition-fast)}.custom-chars button.active{background:var(--accent-green);border-color:var(--accent-green);color:var(--bg-primary)}.custom-chars button.excluded{background:var(--accent-red);border-color:var(--accent-red);color:#fff;opacity:.6}.setting-group.actions{display:flex;flex-wrap:wrap;gap:var(--spacing-sm)}.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000b3;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:300;padding:var(--spacing-lg)}.modal-content{max-width:400px;width:100%;text-align:center}.modal-content h2{margin-bottom:var(--spacing-md)}.modal-content p{color:var(--text-muted);margin-bottom:var(--spacing-lg)}.permission-error{margin-top:var(--spacing-md);text-align:center}.permission-error .error{color:var(--accent-red);font-weight:500}.permission-error small{color:var(--text-muted);font-size:.85rem;line-height:1.5}.browser-warning{position:fixed;top:0;left:0;right:0;background:linear-gradient(135deg,#f39c12,#e67e22);color:#1a1a1a;padding:var(--spacing-md) var(--spacing-lg);display:flex;align-items:center;justify-content:space-between;gap:var(--spacing-md);z-index:200;font-size:.9rem;box-shadow:0 2px 10px #0000004d}.browser-warning span{flex:1}.browser-warning .dismiss-btn{background:transparent;border:none;color:#1a1a1a;font-size:1.5rem;cursor:pointer;padding:0;line-height:1;opacity:.7;transition:opacity var(--transition-fast)}.browser-warning .dismiss-btn:hover{opacity:1}.progress-bar{width:100%;height:8px;background:var(--glass-border);border-radius:4px;overflow:hidden;margin-bottom:var(--spacing-sm)}.progress-fill{height:100%;background:linear-gradient(90deg,var(--accent-blue),var(--accent-green));width:0%;transition:width var(--transition-normal)}.hidden{display:none!important}@media(min-width:768px){.main-content{flex-direction:row;flex-wrap:wrap;max-width:1200px}#practice-area{flex:1;min-width:300px}#chart-section{flex:2;min-width:400px}#progress-chart{height:300px}}@media(max-width:480px){.app-header h1{font-size:1rem}.current-char{font-size:3rem}.glass-card{padding:var(--spacing-md);border-radius:12px}}@supports (padding-top: env(safe-area-inset-top)){.app-header{padding-top:calc(var(--spacing-md) + env(safe-area-inset-top))}.settings-panel{padding-top:calc(var(--spacing-lg) + env(safe-area-inset-top));padding-bottom:calc(var(--spacing-lg) + env(safe-area-inset-bottom))}}.calibration-modal{max-width:500px;text-align:left}.calibration-instructions{font-size:.85rem;color:var(--text-muted);margin-bottom:var(--spacing-lg);line-height:1.6}.calibration-progress{display:flex;align-items:center;gap:var(--spacing-md);margin-bottom:var(--spacing-lg)}.calibration-progress .progress-bar{flex:1;margin-bottom:0}.calibration-char-display{text-align:center;margin-bottom:var(--spacing-lg)}.calibration-char-display .label{display:block;font-size:.85rem;color:var(--text-muted);margin-bottom:var(--spacing-sm)}.calibration-char-display .big-char{display:block;font-size:5rem;font-weight:700;font-family:var(--font-mono);color:var(--accent-blue);text-shadow:0 0 30px rgba(59,130,246,.3)}.calibration-status{text-align:center;padding:var(--spacing-md);background:#0003;border-radius:8px;margin-bottom:var(--spacing-lg);font-size:.9rem;color:var(--text-muted)}.calibration-status.listening{color:var(--accent-blue);background:#3b82f61a;animation:pulse-bg 1.5s ease-in-out infinite}@keyframes pulse-bg{0%,to{opacity:1}50%{opacity:.7}}.calibration-heard{margin-bottom:var(--spacing-lg)}.calibration-heard .label{display:block;font-size:.85rem;color:var(--text-muted);margin-bottom:var(--spacing-sm)}.heard-list{display:flex;flex-wrap:wrap;gap:var(--spacing-xs);min-height:32px;padding:var(--spacing-sm);background:#0003;border-radius:8px}.heard-tag{display:inline-block;padding:var(--spacing-xs) var(--spacing-sm);background:var(--accent-green);color:var(--bg-primary);border-radius:4px;font-size:.8rem;font-family:var(--font-mono)}.calibration-controls{display:flex;gap:var(--spacing-sm);justify-content:center;margin-bottom:var(--spacing-lg);flex-wrap:wrap}.calibration-controls .primary-btn.recording{background:linear-gradient(135deg,var(--accent-red),#dc2626);animation:pulse-btn 1s ease-in-out infinite}@keyframes pulse-btn{0%,to{box-shadow:0 4px 15px #ff47574d}50%{box-shadow:0 4px 25px #ff475799}}.calibration-actions{display:flex;gap:var(--spacing-sm);justify-content:space-between;padding-top:var(--spacing-md);border-top:1px solid var(--glass-border)}.calibration-actions button{flex:1}button:disabled{opacity:.5;cursor:not-allowed}.calibration-info{font-size:.8rem;color:var(--text-muted);margin-bottom:var(--spacing-sm)}.calibration-status-display{padding:var(--spacing-sm) var(--spacing-md);background:#0003;border-radius:6px;font-size:.85rem;color:var(--text-muted);margin-bottom:var(--spacing-sm);display:flex;align-items:center;gap:var(--spacing-sm)}.calibration-status-display .status-icon{font-size:1rem}.calibration-status-display.calibrated{color:var(--accent-green);background:#00d26a1a}.calibration-status-display.partial{color:var(--accent-yellow);background:#ffc1071a}.calibration-buttons{display:flex;gap:var(--spacing-sm);flex-wrap:wrap}.mode-selector{width:100%}.mode-toggle{display:flex;gap:var(--spacing-xs);background:#0000004d;border-radius:10px;padding:var(--spacing-xs)}.mode-btn{flex:1;padding:var(--spacing-sm) var(--spacing-xs);background:transparent;border:none;border-radius:8px;color:var(--text-muted);font-size:.85rem;font-weight:500;cursor:pointer;transition:all var(--transition-fast);white-space:nowrap}.mode-btn.active{background:var(--accent-blue);color:#fff;box-shadow:0 2px 8px #3b82f64d}.mode-btn:hover:not(.active){color:var(--text-primary);background:#ffffff0d}.beta-tag{display:inline-block;padding:1px 4px;background:var(--accent-orange, #f59e0b);color:var(--bg-primary);border-radius:3px;font-size:.6rem;font-weight:600;text-transform:uppercase;margin-left:4px;vertical-align:middle}.word-length-control{margin-top:var(--spacing-md);padding-top:var(--spacing-md);border-top:1px solid var(--glass-border)}.word-length-control label{display:block;font-size:.85rem;color:var(--text-muted);margin-bottom:var(--spacing-sm)}.slider-row{display:flex;align-items:center;gap:var(--spacing-md)}.slider-row input[type=range]{flex:1}.word-count-info{display:block;margin-top:var(--spacing-sm);font-size:.75rem;color:var(--text-muted)}.word-count-info.warning{color:var(--accent-yellow)}.callsign-format-control{margin-top:var(--spacing-md);padding-top:var(--spacing-md);border-top:1px solid var(--glass-border)}.callsign-format-control label{display:block;font-size:.85rem;color:var(--text-muted);margin-bottom:var(--spacing-sm)}.format-checkboxes{display:flex;flex-wrap:wrap;gap:var(--spacing-xs) var(--spacing-sm)}.format-checkbox{display:flex;align-items:center;gap:var(--spacing-xs);padding:var(--spacing-xs) var(--spacing-sm);background:#0003;border-radius:6px;font-size:.8rem;color:var(--text-muted);cursor:pointer;transition:all var(--transition-fast)}.format-checkbox:hover{background:#ffffff0d}.format-checkbox input[type=checkbox]{width:14px;height:14px;accent-color:var(--accent-blue);cursor:pointer}.format-checkbox:has(input:checked){background:#3b82f633;color:var(--text-primary)}.callsign-format-info{display:block;margin-top:var(--spacing-sm);font-size:.75rem;color:var(--text-muted)}.callsign-format-info.warning{color:var(--accent-yellow)}.android-banner{background:linear-gradient(135deg,var(--bg-secondary),#1a1a2e);border:1px solid var(--glass-border);border-radius:16px;padding:var(--spacing-xl);text-align:center;max-width:500px;margin:var(--spacing-xl) auto}.android-banner-content h2{font-size:1.5rem;margin-bottom:var(--spacing-md);color:var(--accent-red)}.android-banner-content p{color:var(--text-muted);margin-bottom:var(--spacing-md);line-height:1.6}.android-banner-content ul{list-style:none;padding:0;margin:var(--spacing-md) 0;text-align:left;display:inline-block}.android-banner-content li{padding:var(--spacing-sm) 0;color:var(--text-primary)}.android-banner-content li strong{color:var(--accent-green)}.android-banner-content .android-apology{font-size:.85rem;color:var(--text-muted);opacity:.8;margin-top:var(--spacing-lg);font-style:italic}.chart-header{display:flex;justify-content:space-between;align-items:center;gap:var(--spacing-md);flex-wrap:wrap}.chart-toggle{display:flex;gap:var(--spacing-xs);background:#0000004d;border-radius:8px;padding:2px}.chart-btn{padding:var(--spacing-xs) var(--spacing-sm);background:transparent;border:none;border-radius:6px;color:var(--text-muted);font-size:.75rem;font-weight:500;cursor:pointer;transition:all var(--transition-fast);white-space:nowrap}.chart-btn.active{background:var(--accent-blue);color:#fff}.chart-btn:hover:not(.active){color:var(--text-primary);background:#ffffff0d}.accept-answer-btn{min-height:var(--touch-min);padding:var(--spacing-sm) var(--spacing-lg);background:linear-gradient(135deg,var(--accent-green),#00a854);color:#fff;border:none;border-radius:10px;font-size:.95rem;font-weight:600;cursor:pointer;transition:transform var(--transition-fast),box-shadow var(--transition-fast),opacity var(--transition-fast);box-shadow:0 4px 15px #00d26a4d;margin-top:var(--spacing-sm)}.accept-answer-btn:hover{transform:translateY(-2px);box-shadow:0 6px 20px #00d26a66}.accept-answer-btn:active{transform:translateY(0)}.accept-answer-btn.saving{opacity:.7;cursor:wait}.practice-buttons{display:flex;gap:var(--spacing-md);justify-content:center;align-items:center;flex-wrap:wrap;width:100%}.recovery-btn{min-height:var(--touch-min);padding:var(--spacing-sm) var(--spacing-lg);background:linear-gradient(135deg,var(--accent-yellow),#e6ac00);color:var(--bg-primary);border:none;border-radius:12px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:transform var(--transition-fast),box-shadow var(--transition-fast);box-shadow:0 4px 15px #ffc1074d}.recovery-btn:hover{transform:translateY(-2px);box-shadow:0 6px 20px #ffc10766}.recovery-btn:active{transform:translateY(0)}.practice-level-container{width:100%;max-width:300px;height:16px;background:#0000004d;border-radius:8px;overflow:hidden;border:1px solid var(--glass-border)}.practice-level{height:100%;width:0%;background:linear-gradient(90deg,var(--accent-green),var(--accent-yellow),var(--accent-red));background-size:300% 100%;background-position:0% 0%;transition:width 50ms ease-out;border-radius:8px}.practice-level.low{background-position:0% 0%}.practice-level.medium{background-position:50% 0%}.practice-level.high{background-position:100% 0%}@media(max-width:480px),(max-height:700px){#mic-test-area{display:none}.main-content{padding:var(--spacing-sm);gap:var(--spacing-sm);max-width:100%}#practice-area{gap:var(--spacing-md);padding:var(--spacing-md)}.current-char{font-size:4.5rem;min-height:5.5rem}.primary-btn,.recovery-btn{min-height:64px;font-size:1.3rem;padding:var(--spacing-md) var(--spacing-xl);flex:1;min-width:120px}.accept-answer-btn{min-height:60px;font-size:1.1rem;width:100%;max-width:300px}.practice-level-container{max-width:100%;height:20px}.mode-selector{gap:var(--spacing-sm)}.mode-toggle{gap:var(--spacing-xs)}.mode-btn{padding:var(--spacing-xs) var(--spacing-sm);font-size:.8rem}#chart-section{max-height:35vh;overflow-y:auto;padding:var(--spacing-sm)}#progress-chart{height:150px}.app-header{padding:var(--spacing-sm) var(--spacing-md)}.app-header h1{font-size:.9rem}}@media(max-height:600px){.current-char{font-size:3.5rem;min-height:4rem}#chart-section{max-height:25vh}.feedback-display{gap:var(--spacing-xs)}.feedback-text{font-size:.8rem}}
